# 测试工程师 gate keeper（把门人）

以用户为中心

# 测试工程师的职责

## 1. 审定产品需求

1-2点很重要

- **需求合理性**
- **符合场景**
- 可测试性
- 测试工作量预估
- 优先级

## 2. 审定代码设计

- 审定主要技术路线

- 审定技术难点解决方案

- 性能风险

- 安全性风险

- 其他风险

  

## 3. 测试设计&用例开发

- 主要测试策略
  - 基于风险评估，确定测试工作的重点
- 技术难点控制
- 详细测试设计&测试用例开发
  - 自动化用例 （要有一定比例）
  - 手动用例
- 计划&里程碑

## 4. 测试集执行

1-2点完成后，至少80%可用。功能基本完成。

- **功能测试**
- **集成测试**
- 性能测试
- 压力测试
- 用户测试
- 安全测试
- 其他测试

## 5. 回归测试 & 代码管理

### 回归测试

- 如果一段代码被改动，不仅仅是本次改动涉及的功能需
- 要测试，同时要确定以前所有的功能没有被影响。——
  回归测试
- **回归测试用例应该是自动化的**
- 上线的代码必须经过全面的回归测试

### 代码管理

代码管理应该由测试工程师负责，而不是开发工程师。

- 开发工程师：管理代码本身
- 测试工程师：管理代码分支

“Trunk-branch”模式

- Trunk\Mainline\Production：主干代码
  测试工程师职责
  最接近Release Branch的代码
  不允许任何人直接修改代码，修改需要建立HotFix或者Release
  Branch，然后RI
  保持随时可用，buildable & testable，由测试团队保证质量
- Branch\Develop\Feature：开发分支由开发团队保证质量
  最底层分支用于开发代码
  非底层分支用于合并代码，只有在FI\RI发现bug时可以因修改bug而改
  动代码，不允许直接开发
  开发分支可以有子分支
- Release Branch：用于发布的分支

“Trunk-branch”模式

- RI（Reverse Integration） dev分支合并到master
  用于将新开发的代码合并到Trunk
  从Branch 向 Trunk 合并代码的动作
  从低级Branch向其父Branch合并代码的动作
  每一次RI对应一次RI回归测试

- FI（Forward Integration）：master分支合并到dev
  用于从Trunk获得其他Branch更新的代码

  从 Trunk向 Branch合并代码的动作

  从父级Branch向子级Branch合并代码的动作

  每一次FI对应一次FI回归测试

  

![1579594540501](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\1579594540501.png)

## 6. 灰度发布

- 为什么需要灰度发布？
  - 效果难于通过测试评估
  - 风险较大，担心产生重大故障，产生大面积客诉

- 测试工程师职责
  - 负责集成测试环境的部署和测试
  -  负责Staging环境、试验田\分桶环境、生产环境的冒烟和辅助
    上线。

### 阿里的灰度发布环境

- 集成测试环境
  ・ 与生产环境结构完全类似，但是机器处于测试环境中
  ・ 用于测试

- Staging 环境
  ・ 机器处于生产环境，但是只能由冒烟服务器访问，不接受外部
  机器访问
- 试验田\分桶环境
  ・ 机器处于生产环境，接受外部机器访问，流量受控
- 生产环境
  ・ 就是生产环境
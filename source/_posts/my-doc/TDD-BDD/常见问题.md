### 在 enzyme中，怎么测试事件

通过 `simulate("click",{ target:{value:3}})` 来完成



###  测试第三方的库时，有可能是因为用了定时器或者微任务之类的。

可以在单元测试中用  

```javascript
await timeout();
wrapper.update();
```



### 怎么加快定时器测试

```javascript
jest.runAllTimers();
```



### 记得用mount

```react
  const wrapper = mount(
      <Tabs isOutline={true} onChange={fn}>
        <TabPane tab="ITEMONE">ITEMONE</TabPane>
        <TabPane tab="ITEMTWO">ITEMTWO</TabPane>
      </Tabs>
    );
```



### 查看覆盖率

```shell
jest --coverage
```



### 调试

在vscode中安装 jest插件，直接debug很方便，自动跑测试。





oned中 jest 配置

```javascript
module.exports = {
  clearMocks: true,
  globals: {
    'ts-jest': {
      tsConfig: 'tsconfig.json'
    }
  },
  coverageDirectory: 'coverage',
  collectCoverageFrom: ['src/components/**/*.{ts,tsx}', '!**/node_modules/**', '!src/components/lib/**/*'],//单元测试覆盖率的范围
  moduleFileExtensions: ['ts', 'tsx', 'js'],
  unmockedModulePathPatterns: ['react', 'enzyme', 'jest-enzyme'],
  coveragePathIgnorePatterns: ['\\\\node_modules\\\\'],
  modulePathIgnorePatterns: ['<rootDir>/src/components/lib/'],
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.js'],
  roots: ['<rootDir>/src/components/'],
  testMatch: ['**/__tests__/**/*.[jt]s?(x)', '**/?(*.)+(spec|test).[tj]s?(x)'],
  transform: {
    '^.+\\.tsx?$': 'ts-jest'
  },
  moduleNameMapper: {
    '\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$':
      '<rootDir>/__mocks__/fileMock.js',
    '\\.(css|less|sass)$': 'identity-obj-proxy', //css后缀文件的mock
    '^oned$': '<rootDir>/src/components/index.tsx' //可以在测试之用 import { Button } from 'oned'
  }
};

```




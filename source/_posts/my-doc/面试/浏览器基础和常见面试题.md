# 事件机制

三个阶段：

- 捕获
- 触发
- 冒泡



## 注册事件

`addEventListener`的三个参数：

- `capture`：布尔值，和 `useCapture` 作用一样
- `once`：布尔值，值为 `true` 表示该回调只会调用一次，调用后会移除监听
- `passive`：布尔值，表示永远不会调用 `preventDefault`

## 事件代理

- 节省内存
- 不需要给子节点注销事件



# 跨域

> 涉及面试题：什么是跨域？为什么浏览器要使用同源策略？你有几种方式可以解决跨域问题？了解预检请求嘛？

## JSONP

## CORS

- #### 简单请求

- #### 复杂请求

# 存储

- cookie
  - http-only
  - secure
  - same-site
- localStorage
- sessionStorage
- indexDB



# Service Worker

Service Worker 是运行在浏览器背后的**独立线程**，一般可以用来实现缓存功能。使用 Service Worker的话，传输协议必须为 **HTTPS**



# 缓存

## 缓存位置

1. Service Worker
2. Memory Cache
3. Disk Cache
4. Push Cache
5. 网络请求

## 缓存策略

### 强缓存

- Expires
- Cache-control（优先）

### 协商缓存

- Last-Modified 和 If-Modified-Since
- ETag（优先） 和 If-None-Match



## 实际场景应用缓存策略

频繁变动的资源

代码文件





# 浏览器渲染原理

## 浏览器接收到 HTML 文件并转换为 DOM 树

## 将 CSS 文件转换为 CSSOM 树

## 生成渲染树

## 重绘（Repaint）和回流（Reflow）



# 安全问题

## XSS

## CSP

CSP 本质上就是建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截是由浏览器自己实现的。

## CSRF

1. Get 请求不对数据进行修改
2. 不让第三方网站访问到用户 Cookie `SameSite`
3. 阻止第三方网站请求接口  `验证 Referer`
4. 请求时附带验证信息，比如验证码或者 Token

## 点击劫持

> 涉及面试题：什么是点击劫持？如何防范点击劫持？

## 中间人攻击